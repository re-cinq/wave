(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const _ of i)if(_.type==="childList")for(const c of _.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const _={};return i.integrity&&(_.integrity=i.integrity),i.referrerPolicy&&(_.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?_.credentials="include":i.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(i){if(i.ep)return;i.ep=!0;const _=n(i);fetch(i.href,_)}})();var z,p,ye,L,le,be,ke,$e,te,Q,X,M={},we=[],Fe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,V=Array.isArray;function S(e,t){for(var n in t)e[n]=t[n];return e}function ne(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ae(e,t,n){var r,i,_,c={};for(_ in t)_=="key"?r=t[_]:_=="ref"?i=t[_]:c[_]=t[_];if(arguments.length>2&&(c.children=arguments.length>3?z.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(_ in e.defaultProps)c[_]===void 0&&(c[_]=e.defaultProps[_]);return W(e,c,r,i,null)}function W(e,t,n,r,i){var _={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ye,__i:-1,__u:0};return i==null&&p.vnode!=null&&p.vnode(_),_}function T(e){return e.children}function O(e,t){this.props=e,this.context=t}function x(e,t){if(t==null)return e.__?x(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?x(e):null}function Se(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Se(e)}}function se(e){(!e.__d&&(e.__d=!0)&&L.push(e)&&!q.__r++||le!=p.debounceRendering)&&((le=p.debounceRendering)||be)(q)}function q(){for(var e,t,n,r,i,_,c,a=1;L.length;)L.length>a&&L.sort(ke),e=L.shift(),a=L.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,_=[],c=[],t.__P&&((n=S({},r)).__v=r.__v+1,p.vnode&&p.vnode(n),re(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,_,i??x(r),!!(32&r.__u),c),n.__v=r.__v,n.__.__k[n.__i]=n,Le(_,n,c),r.__e=r.__=null,n.__e!=i&&Se(n)));q.__r=0}function Ee(e,t,n,r,i,_,c,a,u,s,h){var o,d,f,b,$,k,m,v=r&&r.__k||we,E=t.length;for(u=Ue(n,t,v,u,E),o=0;o<E;o++)(f=n.__k[o])!=null&&(d=f.__i==-1?M:v[f.__i]||M,f.__i=o,k=re(e,f,d,i,_,c,a,u,s,h),b=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&_e(d.ref,null,f),h.push(f.ref,f.__c||b,f)),$==null&&b!=null&&($=b),(m=!!(4&f.__u))||d.__k===f.__k?u=Pe(f,u,e,m):typeof f.type=="function"&&k!==void 0?u=k:b&&(u=b.nextSibling),f.__u&=-7);return n.__e=$,u}function Ue(e,t,n,r,i){var _,c,a,u,s,h=n.length,o=h,d=0;for(e.__k=new Array(i),_=0;_<i;_++)(c=t[_])!=null&&typeof c!="boolean"&&typeof c!="function"?(typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?c=e.__k[_]=W(null,c,null,null,null):V(c)?c=e.__k[_]=W(T,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?c=e.__k[_]=W(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):e.__k[_]=c,u=_+d,c.__=e,c.__b=e.__b+1,a=null,(s=c.__i=Ie(c,n,u,o))!=-1&&(o--,(a=n[s])&&(a.__u|=2)),a==null||a.__v==null?(s==-1&&(i>h?d--:i<h&&d++),typeof c.type!="function"&&(c.__u|=4)):s!=u&&(s==u-1?d--:s==u+1?d++:(s>u?d--:d++,c.__u|=4))):e.__k[_]=null;if(o)for(_=0;_<h;_++)(a=n[_])!=null&&!(2&a.__u)&&(a.__e==r&&(r=x(a)),De(a,a));return r}function Pe(e,t,n,r){var i,_;if(typeof e.type=="function"){for(i=e.__k,_=0;i&&_<i.length;_++)i[_]&&(i[_].__=e,t=Pe(i[_],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=x(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ie(e,t,n,r){var i,_,c,a=e.key,u=e.type,s=t[n],h=s!=null&&(2&s.__u)==0;if(s===null&&a==null||h&&a==s.key&&u==s.type)return n;if(r>(h?1:0)){for(i=n-1,_=n+1;i>=0||_<t.length;)if((s=t[c=i>=0?i--:_++])!=null&&!(2&s.__u)&&a==s.key&&u==s.type)return c}return-1}function ce(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Fe.test(t)?n:n+"px"}function R(e,t,n,r,i){var _,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ce(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||ce(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")_=t!=(t=t.replace($e,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+_]=n,n?r?n.u=r.u:(n.u=te,e.addEventListener(t,_?X:Q,_)):e.removeEventListener(t,_?X:Q,_);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ae(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=te++;else if(t.t<n.u)return;return n(p.event?p.event(t):t)}}}function re(e,t,n,r,i,_,c,a,u,s){var h,o,d,f,b,$,k,m,v,E,P,U,C,oe,I,N,K,w=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=t.__e=n.__e]),(h=p.__b)&&h(t);e:if(typeof w=="function")try{if(m=t.props,v="prototype"in w&&w.prototype.render,E=(h=w.contextType)&&r[h.__c],P=h?E?E.props.value:h.__:r,n.__c?k=(o=t.__c=n.__c).__=o.__E:(v?t.__c=o=new w(m,P):(t.__c=o=new O(m,P),o.constructor=w,o.render=We),E&&E.sub(o),o.state||(o.state={}),o.__n=r,d=o.__d=!0,o.__h=[],o._sb=[]),v&&o.__s==null&&(o.__s=o.state),v&&w.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=S({},o.__s)),S(o.__s,w.getDerivedStateFromProps(m,o.__s))),f=o.props,b=o.state,o.__v=t,d)v&&w.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),v&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(v&&w.getDerivedStateFromProps==null&&m!==f&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(m,P),t.__v==n.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(m,o.__s,P)===!1){for(t.__v!=n.__v&&(o.props=m,o.state=o.__s,o.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(H){H&&(H.__=t)}),U=0;U<o._sb.length;U++)o.__h.push(o._sb[U]);o._sb=[],o.__h.length&&c.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(m,o.__s,P),v&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(f,b,$)})}if(o.context=P,o.props=m,o.__P=e,o.__e=!1,C=p.__r,oe=0,v){for(o.state=o.__s,o.__d=!1,C&&C(t),h=o.render(o.props,o.state,o.context),I=0;I<o._sb.length;I++)o.__h.push(o._sb[I]);o._sb=[]}else do o.__d=!1,C&&C(t),h=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++oe<25);o.state=o.__s,o.getChildContext!=null&&(r=S(S({},r),o.getChildContext())),v&&!d&&o.getSnapshotBeforeUpdate!=null&&($=o.getSnapshotBeforeUpdate(f,b)),N=h,h!=null&&h.type===T&&h.key==null&&(N=Te(h.props.children)),a=Ee(e,V(N)?N:[N],t,n,r,i,_,c,a,u,s),o.base=t.__e,t.__u&=-161,o.__h.length&&c.push(o),k&&(o.__E=o.__=null)}catch(H){if(t.__v=null,u||_!=null)if(H.then){for(t.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,t.__e=a}else{for(K=_.length;K--;)ne(_[K]);Y(t)}else t.__e=n.__e,t.__k=n.__k,H.then||Y(t);p.__e(H,t,n)}else _==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Re(n.__e,t,n,r,i,_,c,u,s);return(h=p.diffed)&&h(t),128&t.__u?void 0:a}function Y(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Y)}function Le(e,t,n){for(var r=0;r<n.length;r++)_e(n[r],n[++r],n[++r]);p.__c&&p.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(_){_.call(i)})}catch(_){p.__e(_,i.__v)}})}function Te(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:V(e)?e.map(Te):S({},e)}function Re(e,t,n,r,i,_,c,a,u){var s,h,o,d,f,b,$,k=n.props||M,m=t.props,v=t.type;if(v=="svg"?i="http://www.w3.org/2000/svg":v=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((f=_[s])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){e=f,_[s]=null;break}}if(e==null){if(v==null)return document.createTextNode(m);e=document.createElementNS(i,v,m.is&&m),a&&(p.__m&&p.__m(t,_),a=!1),_=null}if(v==null)k===m||a&&e.data==m||(e.data=m);else{if(_=_&&z.call(e.childNodes),!a&&_!=null)for(k={},s=0;s<e.attributes.length;s++)k[(f=e.attributes[s]).name]=f.value;for(s in k)if(f=k[s],s!="children"){if(s=="dangerouslySetInnerHTML")o=f;else if(!(s in m)){if(s=="value"&&"defaultValue"in m||s=="checked"&&"defaultChecked"in m)continue;R(e,s,null,f,i)}}for(s in m)f=m[s],s=="children"?d=f:s=="dangerouslySetInnerHTML"?h=f:s=="value"?b=f:s=="checked"?$=f:a&&typeof f!="function"||k[s]===f||R(e,s,f,k[s],i);if(h)a||o&&(h.__html==o.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(o&&(e.innerHTML=""),Ee(t.type=="template"?e.content:e,V(d)?d:[d],t,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":i,_,c,_?_[0]:n.__k&&x(n,0),a,u),_!=null)for(s=_.length;s--;)ne(_[s]);a||(s="value",v=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[s]||v=="progress"&&!b||v=="option"&&b!=k[s])&&R(e,s,b,k[s],i),s="checked",$!=null&&$!=e[s]&&R(e,s,$,k[s],i))}return e}function _e(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){p.__e(i,n)}}function De(e,t,n){var r,i;if(p.unmount&&p.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||_e(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(_){p.__e(_,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&De(r[i],t,n||typeof e.type!="function");n||ne(e.__e),e.__c=e.__=e.__e=void 0}function We(e,t,n){return this.constructor(e,n)}function Oe(e,t,n){var r,i,_,c;t==document&&(t=document.documentElement),p.__&&p.__(e,t),i=(r=!1)?null:t.__k,_=[],c=[],re(t,e=t.__k=Ae(T,null,[e]),i||M,M,t.namespaceURI,i?null:t.firstChild?z.call(t.childNodes):null,_,i?i.__e:t.firstChild,r,c),Le(_,e,c)}z=we.slice,p={__e:function(e,t,n,r){for(var i,_,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((_=i.constructor)&&_.getDerivedStateFromError!=null&&(i.setState(_.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),c=i.__d),c)return i.__E=i}catch(a){e=a}throw e}},ye=0,O.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=S({},this.state),typeof e=="function"&&(e=e(S({},n),this.props)),e&&S(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),se(this))},O.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),se(this))},O.prototype.render=T,L=[],be=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ke=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,$e=/(PointerCapture)$|Capture$/i,te=0,Q=ae(!1),X=ae(!0);var Be=0;function l(e,t,n,r,i,_){t||(t={});var c,a,u=t;if("ref"in u)for(a in u={},t)a=="ref"?c=t[a]:u[a]=t[a];var s={type:e,props:u,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Be,__i:-1,__u:0,__source:i,__self:_};if(typeof e=="function"&&(c=e.defaultProps))for(a in c)u[a]===void 0&&(u[a]=c[a]);return p.vnode&&p.vnode(s),s}var F,g,G,ue,A=0,He=[],y=p,de=y.__b,he=y.__r,fe=y.diffed,pe=y.__c,ve=y.unmount,me=y.__;function ie(e,t){y.__h&&y.__h(g,e,A||t),A=0;var n=g.__H||(g.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function D(e){return A=1,qe(Me,e)}function qe(e,t,n){var r=ie(F++,2);if(r.t=e,!r.__c&&(r.__=[Me(void 0,t),function(a){var u=r.__N?r.__N[0]:r.__[0],s=r.t(u,a);u!==s&&(r.__N=[s,r.__[1]],r.__c.setState({}))}],r.__c=g,!g.__f)){var i=function(a,u,s){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(d){return!!d.__c});if(h.every(function(d){return!d.__N}))return!_||_.call(this,a,u,s);var o=r.__c.props!==a;return h.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(o=!0)}}),_&&_.call(this,a,u,s)||o};g.__f=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var h=_;_=void 0,i(a,u,s),_=h}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=i}return r.__N||r.__}function xe(e,t){var n=ie(F++,3);!y.__s&&Ne(n.__H,t)&&(n.__=e,n.u=t,g.__H.__h.push(n))}function je(e){return A=5,Ce(function(){return{current:e}},[])}function Ce(e,t){var n=ie(F++,7);return Ne(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function J(e,t){return A=8,Ce(function(){return e},t)}function ze(){for(var e;e=He.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(B),e.__H.__h.forEach(Z),e.__H.__h=[]}catch(t){e.__H.__h=[],y.__e(t,e.__v)}}y.__b=function(e){g=null,de&&de(e)},y.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),me&&me(e,t)},y.__r=function(e){he&&he(e),F=0;var t=(g=e.__c).__H;t&&(G===g?(t.__h=[],g.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(B),t.__h.forEach(Z),t.__h=[],F=0)),G=g},y.diffed=function(e){fe&&fe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(He.push(t)!==1&&ue===y.requestAnimationFrame||((ue=y.requestAnimationFrame)||Ve)(ze)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),G=g=null},y.__c=function(e,t){t.some(function(n){try{n.__h.forEach(B),n.__h=n.__h.filter(function(r){return!r.__||Z(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],y.__e(r,n.__v)}}),pe&&pe(e,t)},y.unmount=function(e){ve&&ve(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{B(r)}catch(i){t=i}}),n.__H=void 0,t&&y.__e(t,n.__v))};var ge=typeof requestAnimationFrame=="function";function Ve(e){var t,n=function(){clearTimeout(r),ge&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);ge&&(t=requestAnimationFrame(n))}function B(e){var t=g,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),g=t}function Z(e){var t=g;e.__c=e.__(),g=t}function Ne(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Me(e,t){return typeof t=="function"?t(e):t}function ee(e,t){const[n,r]=D(null),[i,_]=D(!0),[c,a]=D(null);return xe(()=>{let u=!1;return _(!0),fetch(e).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.json()}).then(s=>{u||(r(s),a(null))}).catch(s=>{u||a(s.message)}).finally(()=>{u||_(!1)}),()=>{u=!0}},[e,t]),{data:n,loading:i,error:c}}const Ke={pending:"badge-pending",running:"badge-running",completed:"badge-completed",failed:"badge-failed",cancelled:"badge-cancelled",retrying:"badge-retrying"};function j({status:e}){const t=Ke[e]||"badge-pending";return l("span",{class:`badge ${t}`,children:e})}function Ge({onSelectRun:e,refreshKey:t}){const[n,r]=D(""),[i,_]=D(""),c=new URLSearchParams;c.set("limit","50"),n&&c.set("status",n);const{data:a,loading:u,error:s}=ee(`/api/runs?${c}`,t),h=(a==null?void 0:a.runs)??[],o=i?h.filter(d=>d.run_id.includes(i)||d.pipeline_name.includes(i)):h;return l("div",{class:"pipeline-list",children:[l("div",{class:"list-controls",children:[l("input",{type:"text",class:"search-input",placeholder:"Search runs...",value:i,onInput:d=>_(d.target.value)}),l("select",{class:"status-filter",value:n,onChange:d=>r(d.target.value),children:[l("option",{value:"",children:"All statuses"}),l("option",{value:"running",children:"Running"}),l("option",{value:"completed",children:"Completed"}),l("option",{value:"failed",children:"Failed"}),l("option",{value:"pending",children:"Pending"}),l("option",{value:"cancelled",children:"Cancelled"})]})]}),u&&h.length===0&&l("div",{class:"loading",children:"Loading..."}),s&&l("div",{class:"error-msg",children:["Error: ",s]}),!u&&o.length===0&&l("div",{class:"empty-state",children:"No pipeline runs found"}),l("table",{class:"runs-table",children:[l("thead",{children:l("tr",{children:[l("th",{children:"Run ID"}),l("th",{children:"Pipeline"}),l("th",{children:"Status"}),l("th",{children:"Step"}),l("th",{children:"Duration"}),l("th",{children:"Tokens"}),l("th",{children:"Started"})]})}),l("tbody",{children:o.map(d=>l("tr",{class:"run-row",onClick:()=>e(d.run_id),children:[l("td",{class:"mono",children:d.run_id}),l("td",{children:d.pipeline_name}),l("td",{children:l(j,{status:d.status})}),l("td",{children:d.current_step||"-"}),l("td",{children:Je(d.duration_ms)}),l("td",{children:Qe(d.total_tokens)}),l("td",{children:Xe(d.started_at)})]},d.run_id))})]})]})}function Je(e){if(e<1e3)return`${e}ms`;const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60),r=t%60;return n<60?`${n}m ${r}s`:`${Math.floor(n/60)}h ${n%60}m`}function Qe(e){return e<1e3?`${e}`:e<1e6?`${(e/1e3).toFixed(1)}k`:`${(e/1e6).toFixed(1)}M`}function Xe(e){try{return new Date(e).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}function Ye({step:e}){return l("div",{class:"step-card",children:[l("div",{class:"step-header",children:[l("span",{class:"step-id",children:e.step_id}),l(j,{status:e.state}),e.persona&&l("span",{class:"step-persona",children:e.persona})]}),l("div",{class:"step-progress-bar-container",children:l("div",{class:"step-progress-bar-fill",style:{width:`${e.progress}%`}})}),l("div",{class:"step-meta",children:[l("span",{children:[e.progress,"%"]}),e.current_action&&l("span",{class:"step-action",children:e.current_action}),e.tokens_used!==void 0&&e.tokens_used>0&&l("span",{children:[e.tokens_used.toLocaleString()," tokens"]})]}),e.message&&l("div",{class:"step-message",children:e.message})]})}function Ze({runID:e,onBack:t,refreshKey:n}){const{data:r,loading:i,error:_}=ee(`/api/runs/${e}`,n),{data:c}=ee(`/api/runs/${e}/events`,n);if(i&&!r)return l("div",{class:"loading",children:"Loading..."});if(_)return l("div",{class:"error-msg",children:["Error: ",_]});if(!r)return null;const{run:a,steps:u,pipeline_progress:s}=r,h=(c==null?void 0:c.events)??[];return l("div",{class:"pipeline-detail",children:[l("button",{class:"back-btn",onClick:t,children:"Back"}),l("div",{class:"run-header",children:[l("h2",{children:a.run_id}),l(j,{status:a.status})]}),l("div",{class:"run-info",children:l("dl",{children:[l("dt",{children:"Pipeline"}),l("dd",{children:a.pipeline_name}),l("dt",{children:"Started"}),l("dd",{children:new Date(a.started_at).toLocaleString()}),a.completed_at&&l(T,{children:[l("dt",{children:"Completed"}),l("dd",{children:new Date(a.completed_at).toLocaleString()})]}),l("dt",{children:"Duration"}),l("dd",{children:et(a.duration_ms)}),l("dt",{children:"Tokens"}),l("dd",{children:a.total_tokens.toLocaleString()}),a.input&&l(T,{children:[l("dt",{children:"Input"}),l("dd",{class:"run-input",children:a.input})]}),a.error&&l(T,{children:[l("dt",{children:"Error"}),l("dd",{class:"run-error",children:a.error})]})]})}),s&&l("div",{class:"progress-section",children:[l("h3",{children:"Pipeline Progress"}),l("div",{class:"progress-bar-container",children:l("div",{class:"progress-bar-fill",style:{width:`${s.overall_progress}%`}})}),l("span",{class:"progress-text",children:[s.completed_steps,"/",s.total_steps," ","steps (",s.overall_progress,"%)"]})]}),u&&u.length>0&&l("div",{class:"steps-section",children:[l("h3",{children:"Steps"}),u.map(o=>l(Ye,{step:o},o.step_id))]}),h.length>0&&l("div",{class:"events-section",children:[l("h3",{children:"Event Log"}),l("table",{class:"events-table",children:[l("thead",{children:l("tr",{children:[l("th",{children:"Time"}),l("th",{children:"State"}),l("th",{children:"Step"}),l("th",{children:"Persona"}),l("th",{children:"Message"})]})}),l("tbody",{children:h.map(o=>l("tr",{children:[l("td",{class:"mono",children:new Date(o.timestamp).toLocaleTimeString()}),l("td",{children:l(j,{status:o.state})}),l("td",{children:o.step_id||"-"}),l("td",{children:o.persona||"-"}),l("td",{children:o.message||"-"})]},o.id))})]})]})]})}function et(e){if(e<1e3)return`${e}ms`;const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60),r=t%60;return n<60?`${n}m ${r}s`:`${Math.floor(n/60)}h ${n%60}m`}function tt(e,t){const n=je(t);n.current=t,xe(()=>{let r=null,i,_=1e3;function c(){r=new EventSource(e),r.addEventListener("connected",()=>{_=1e3}),r.addEventListener("run_update",a=>{var u,s;(s=(u=n.current).onEvent)==null||s.call(u,a)}),r.addEventListener("step_update",a=>{var u,s;(s=(u=n.current).onEvent)==null||s.call(u,a)}),r.addEventListener("progress",a=>{var u,s;(s=(u=n.current).onEvent)==null||s.call(u,a)}),r.onerror=a=>{var u,s;(s=(u=n.current).onError)==null||s.call(u,a),r==null||r.close(),i=setTimeout(c,_),_=Math.min(_*2,3e4)}}return c(),()=>{r==null||r.close(),clearTimeout(i)}},[e])}function nt(){const[e,t]=D({type:"list"}),[n,r]=D(0);tt("/api/events",{onEvent:J(()=>{r(c=>c+1)},[])});const i=J(c=>{t({type:"detail",runID:c})},[]),_=J(()=>{t({type:"list"})},[]);return l("div",{class:"app",children:[l("header",{class:"app-header",children:l("h1",{class:"app-title",onClick:_,children:[l("span",{class:"logo",children:"Wave"}),l("span",{class:"subtitle",children:"Dashboard"})]})}),l("main",{class:"app-main",children:e.type==="list"?l(Ge,{onSelectRun:i,refreshKey:n}):l(Ze,{runID:e.runID,onBack:_,refreshKey:n})})]})}Oe(l(nt,{}),document.getElementById("app"));
