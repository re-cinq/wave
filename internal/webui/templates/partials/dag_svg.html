{{define "templates/partials/dag_svg.html"}}
<svg class="dag-svg" viewBox="0 0 {{.Width}} {{.Height}}" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  {{range .Edges}}
  <path class="dag-edge" d="M{{.FromX}} {{.FromY}} C{{.CX1}} {{.CY1}}, {{.CX2}} {{.CY2}}, {{.ToX}} {{.ToY}}"
        stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  {{end}}
  {{range .Nodes}}
  <g class="dag-node" data-id="{{.ID}}" data-status="{{.Status}}" transform="translate({{.X}}, {{.Y}})">
    <rect width="140" height="50" rx="8" ry="8" class="dag-node-rect {{.Status}}"/>
    <text x="70" y="20" text-anchor="middle" class="dag-node-label">{{.Label}}</text>
    <text x="70" y="38" text-anchor="middle" class="dag-node-persona">{{.Persona}}</text>
  </g>
  {{end}}
</svg>
{{end}}
