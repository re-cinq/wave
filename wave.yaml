apiVersion: v1
kind: WaveManifest
metadata:
    description: A Wave multi-agent project
    name: wave-project
project:
    language: go
    test_command: "go test -race ./..."
    lint_command: "go vet ./..."
    build_command: "go build ./..."
    source_glob: "*.go"
adapters:
    claude:
        binary: claude
        default_permissions:
            allowed_tools:
                - Read
                - Write
                - Edit
                - Bash
            deny: []
        mode: headless
        output_format: json
        project_files:
            - CLAUDE.md
            - .claude/settings.json
personas:
    auditor:
        adapter: claude
        description: Security review and quality assurance
        model: opus
        #temperature: 0.1
        permissions:
            allowed_tools:
                - Read
                - Grep
                - Bash(go vet*)
                - Bash(npm audit*)
            deny:
                - Write(*)
                - Edit(*)
        system_prompt_file: .wave/personas/auditor.md
    craftsman:
        adapter: claude
        description: Code implementation and testing
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write
                - Edit
                - Bash
            deny:
                - Bash(rm -rf /*)
        system_prompt_file: .wave/personas/craftsman.md
    debugger:
        adapter: claude
        description: Systematic issue diagnosis and root cause analysis
        model: opus
        #temperature: 0.2
        permissions:
            allowed_tools:
                - Read
                - Grep
                - Glob
                - Bash(go test*)
                - Bash(git log*)
                - Bash(git diff*)
                - Bash(git bisect*)
            deny:
                - Write(*)
                - Edit(*)
        system_prompt_file: .wave/personas/debugger.md
    navigator:
        adapter: claude
        description: Read-only codebase exploration and analysis
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - Bash(git log*)
                - Bash(git status*)
            deny:
                - Write(*)
                - Edit(*)
                - Bash(git commit*)
                - Bash(git push*)
        system_prompt_file: .wave/personas/navigator.md
    philosopher:
        adapter: claude
        description: Architecture design and specification
        model: opus
        #temperature: 0.7
        permissions:
            allowed_tools:
                - Read
                - Write(.wave/specs/*)
            deny:
                - Bash(*)
        system_prompt_file: .wave/personas/philosopher.md
    planner:
        adapter: claude
        description: Task breakdown and project planning
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
            deny:
                - Write(*)
                - Edit(*)
                - Bash(*)
        system_prompt_file: .wave/personas/planner.md
    summarizer:
        adapter: claude
        description: Context compaction for relay handoffs
        model: opus
        #temperature: 0.2
        permissions:
            allowed_tools:
                - Read
            deny:
                - Write(*)
                - Bash(*)
        system_prompt_file: .wave/personas/summarizer.md
    github-analyst:
        adapter: claude
        description: GitHub issue analysis and quality assessment
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(gh issue view*)
                - Bash(gh issue list*)
                - Bash(gh --version)
                - Bash(git log*)
                - Bash(git status*)
                - Bash(ls *)
                - Write(.wave/artifact.json)
            deny:
                - Bash(gh issue edit*)
                - Bash(gh issue create*)
                - Bash(gh issue close*)
                - Bash(glab *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/github-analyst.md
    github-enhancer:
        adapter: claude
        description: GitHub issue enhancement and improvement
        model: opus
        #temperature: 0.5
        permissions:
            allowed_tools:
                - Read
                - Bash(gh issue edit*)
                - Bash(gh issue view*)
                - Bash(gh --version)
                - Write(.wave/artifact.json)
                - Write(/tmp/*)
            deny:
                - Bash(gh issue create*)
                - Bash(gh issue close*)
                - Bash(glab *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/github-enhancer.md
    github-scoper:
        adapter: claude
        description: GitHub epic decomposition into child issues
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(gh issue create*)
                - Bash(gh issue view*)
                - Bash(gh issue list*)
                - Bash(gh --version)
                - Write(.wave/artifact.json)
            deny:
                - Bash(gh issue edit*)
                - Bash(gh issue close*)
                - Bash(glab *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/github-scoper.md
    implementer:
        adapter: claude
        description: Code execution and artifact generation for pipeline steps
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write
                - Edit
                - Bash
                - Glob
                - Grep
            deny:
                - Bash(rm -rf /*)
                - Bash(sudo *)
        system_prompt_file: .wave/personas/implementer.md
    reviewer:
        adapter: claude
        description: Quality review, validation, and assessment
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - Write(.wave/artifact.json)
                - Write(.wave/artifacts/*)
                - Bash(go test*)
                - Bash(npm test*)
            deny:
                - Write(*.go)
                - Write(*.ts)
                - Edit(*)
        system_prompt_file: .wave/personas/reviewer.md
    researcher:
        adapter: claude
        description: Web research and information synthesis
        model: opus
        #temperature: 0.5
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - WebSearch
                - WebFetch
                - Write
            deny:
                - Edit(*)
                - Bash(*)
                - Write(*.go)
                - Write(*.ts)
                - Write(*.py)
        system_prompt_file: .wave/personas/researcher.md
    github-commenter:
        adapter: claude
        description: Post comments on GitHub issues and pull requests, create PRs
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write(.wave/artifact.json)
                - Write(.wave/output/*)
                - Bash(gh issue comment*)
                - Bash(gh pr comment*)
                - Bash(gh pr review*)
                - Bash(gh pr create*)
                - Bash(gh pr edit*)
                - Bash(gh pr view*)
                - Bash(gh --version)
                - Bash(git push*)
                - Bash(git status*)
            deny:
                - Bash(gh issue edit*)
                - Bash(gh issue close*)
                - Bash(gh pr merge*)
                - Bash(gh pr close*)
                - Edit(*)
        system_prompt_file: .wave/personas/github-commenter.md
    gitlab-analyst:
        adapter: claude
        description: GitLab issue analysis and quality assessment
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(glab issue view*)
                - Bash(glab issue list*)
                - Bash(glab --version)
                - Bash(git log*)
                - Bash(git status*)
                - Bash(ls *)
                - Write(.wave/artifact.json)
            deny:
                - Bash(glab issue edit*)
                - Bash(glab issue create*)
                - Bash(glab issue close*)
                - Bash(gh *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitlab-analyst.md
    gitlab-enhancer:
        adapter: claude
        description: GitLab issue enhancement and improvement
        model: opus
        #temperature: 0.5
        permissions:
            allowed_tools:
                - Read
                - Bash(glab issue edit*)
                - Bash(glab issue view*)
                - Bash(glab --version)
                - Write(.wave/artifact.json)
                - Write(/tmp/*)
            deny:
                - Bash(glab issue create*)
                - Bash(glab issue close*)
                - Bash(gh *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitlab-enhancer.md
    gitlab-scoper:
        adapter: claude
        description: GitLab epic decomposition into child issues
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(glab issue create*)
                - Bash(glab issue view*)
                - Bash(glab issue list*)
                - Bash(glab --version)
                - Write(.wave/artifact.json)
            deny:
                - Bash(glab issue edit*)
                - Bash(glab issue close*)
                - Bash(gh *)
                - Bash(tea *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitlab-scoper.md
    gitlab-commenter:
        adapter: claude
        description: Post comments on GitLab issues and merge requests
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write(.wave/artifact.json)
                - Write(.wave/output/*)
                - Bash(glab issue note*)
                - Bash(glab mr note*)
                - Bash(glab mr create*)
                - Bash(glab mr update*)
                - Bash(glab --version)
                - Bash(git push*)
                - Bash(git status*)
            deny:
                - Bash(glab issue update*)
                - Bash(glab issue close*)
                - Bash(glab mr merge*)
                - Bash(glab mr close*)
                - Bash(gh *)
                - Bash(tea *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitlab-commenter.md
    gitea-analyst:
        adapter: claude
        description: Gitea issue analysis and quality assessment
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(tea issues view*)
                - Bash(tea issues list*)
                - Bash(tea --version)
                - Bash(git log*)
                - Bash(git status*)
                - Bash(ls *)
                - Write(.wave/artifact.json)
            deny:
                - Bash(tea issues edit*)
                - Bash(tea issues create*)
                - Bash(tea issues close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitea-analyst.md
    gitea-enhancer:
        adapter: claude
        description: Gitea issue enhancement and improvement
        model: opus
        #temperature: 0.5
        permissions:
            allowed_tools:
                - Read
                - Bash(tea issue edit*)
                - Bash(tea issue view*)
                - Bash(tea --version)
                - Write(.wave/artifact.json)
                - Write(/tmp/*)
            deny:
                - Bash(tea issue create*)
                - Bash(tea issue close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitea-enhancer.md
    gitea-scoper:
        adapter: claude
        description: Gitea epic decomposition into child issues
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(tea issues create*)
                - Bash(tea issues view*)
                - Bash(tea issues list*)
                - Bash(tea --version)
                - Write(.wave/artifact.json)
            deny:
                - Bash(tea issues edit*)
                - Bash(tea issues close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(bb *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitea-scoper.md
    gitea-commenter:
        adapter: claude
        description: Post comments on Gitea issues and pull requests
        model: opus
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write(.wave/artifact.json)
                - Write(.wave/output/*)
                - Bash(tea issues comment*)
                - Bash(tea pulls create*)
                - Bash(tea --version)
                - Bash(git push*)
                - Bash(git status*)
            deny:
                - Bash(tea issues edit*)
                - Bash(tea issues close*)
                - Bash(tea pulls merge*)
                - Bash(tea pulls close*)
                - Bash(gh *)
                - Bash(glab *)
                - Edit(*)
        system_prompt_file: .wave/personas/gitea-commenter.md

    bitbucket-analyst:
        adapter: claude
        description: Bitbucket issue analysis and quality assessment
        model: haiku
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(bb issue view*)
                - Bash(bb issue list*)
                - Bash(bb --version)
                - Bash(git log*)
                - Bash(git status*)
                - Bash(ls *)
                - Write(.wave/artifact.json)
            deny:
                - Bash(bb issue edit*)
                - Bash(bb issue create*)
                - Bash(bb issue close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(tea *)
                - Edit(*)
        system_prompt_file: .wave/personas/bitbucket-analyst.md
    bitbucket-enhancer:
        adapter: claude
        description: Bitbucket issue enhancement and improvement
        model: haiku
        #temperature: 0.5
        permissions:
            allowed_tools:
                - Read
                - Bash(bb issue edit*)
                - Bash(bb issue view*)
                - Bash(bb --version)
                - Write(.wave/artifact.json)
                - Write(/tmp/*)
            deny:
                - Bash(bb issue create*)
                - Bash(bb issue close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(tea *)
                - Edit(*)
        system_prompt_file: .wave/personas/bitbucket-enhancer.md
    bitbucket-scoper:
        adapter: claude
        description: Bitbucket epic decomposition into child issues
        model: haiku
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Bash(bb issue create*)
                - Bash(bb issue view*)
                - Bash(bb issue list*)
                - Bash(bb --version)
                - Write(.wave/artifact.json)
            deny:
                - Bash(bb issue edit*)
                - Bash(bb issue close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(tea *)
                - Edit(*)
        system_prompt_file: .wave/personas/bitbucket-scoper.md
    bitbucket-commenter:
        adapter: claude
        description: Post comments on Bitbucket issues and pull requests, create PRs
        model: haiku
        #temperature: 0.3
        permissions:
            allowed_tools:
                - Read
                - Write(.wave/artifact.json)
                - Write(.wave/output/*)
                - Bash(bb issue comment*)
                - Bash(bb pr comment*)
                - Bash(bb pr review*)
                - Bash(bb pr create*)
                - Bash(bb pr edit*)
                - Bash(bb pr view*)
                - Bash(bb --version)
                - Bash(git push*)
                - Bash(git status*)
            deny:
                - Bash(bb issue edit*)
                - Bash(bb issue close*)
                - Bash(bb pr merge*)
                - Bash(bb pr close*)
                - Bash(gh *)
                - Bash(glab *)
                - Bash(tea *)
                - Edit(*)
        system_prompt_file: .wave/personas/bitbucket-commenter.md
    supervisor:
        adapter: claude
        description: Work quality and process quality evaluation
        model: opus
        #temperature: 0.2
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - Bash(git *)
                - Bash(ls *)
                - Bash(find *)
                - Bash(go test*)
                - Bash(cat *)
                - Bash(wc *)
            deny:
                - Write(*)
                - Edit(*)
                - Bash(git push*)
                - Bash(git commit*)
                - Bash(rm*)
        system_prompt_file: .wave/personas/supervisor.md
    validator:
        adapter: claude
        description: Skeptical analysis and verification of findings against source code
        model: opus
        #temperature: 0.1
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - Bash(wc *)
                - Bash(git log*)
                - Bash(git diff*)
            deny:
                - Write(*)
                - Edit(*)
                - Bash(git commit*)
                - Bash(git push*)
                - Bash(rm*)
        system_prompt_file: .wave/personas/validator.md
    synthesizer:
        adapter: claude
        description: Structured synthesis of analysis findings into actionable JSON proposals
        model: opus
        #temperature: 0.2
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
            deny:
                - Edit(*)
                - Bash(*)
        system_prompt_file: .wave/personas/synthesizer.md
    provocateur:
        adapter: claude
        description: Creative challenger for divergent thinking and complexity hunting
        model: opus
        #temperature: 0.8
        permissions:
            allowed_tools:
                - Read
                - Glob
                - Grep
                - Bash(wc *)
                - Bash(git log*)
                - Bash(git diff*)
                - Bash(find*)
                - Bash(ls*)
            deny:
                - Write(*)
                - Edit(*)
                - Bash(git commit*)
                - Bash(git push*)
                - Bash(rm*)
        system_prompt_file: .wave/personas/provocateur.md
runtime:
    audit:
        log_all_file_operations: false
        log_all_tool_calls: true
        log_dir: .wave/traces/
    default_timeout_minutes: 30
    max_concurrent_workers: 5
    meta_pipeline:
        max_depth: 2
        max_total_steps: 20
        max_total_tokens: 500000
        timeout_minutes: 60
    relay:
        strategy: summarize_to_checkpoint
        token_threshold_percent: 80
    workspace_root: .wave/workspaces
skills:
    speckit:
        check: specify --version
        install: uv tool install git+https://github.com/github/spec-kit.git
        init: specify init
